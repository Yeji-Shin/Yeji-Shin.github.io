---
layout: post
title: 23. Rest Proxy, Schema Registry
date: 2022-09-18
category: Kafka
use_math: true
---

## Rest Proxy

Rest Proxy는 kafka client를 사용하지 않고도 Restful API를 통해 kafka의 일부 기능들을 사용할 수 있도록 구현된 서비스이다. topic을 만들거나 메세지 producing이나 comsuming도 가능하며, curl로 테스트나 디버깅도 할 수 있다. 또한 이미 HTTP로 운영하던 서비스는 쉽게 통합이 가능하다. 하지만 kafka broker와 별도 어플리케이션으로 구동되기 때문에 관리를 더 많이 해야하고, 일번적으로 kafka client 보다 성능적으로 좋지 못하다는 단점이 있다. 따라서 kafka client를 도입하지 못하는 상황이거나 kafka client가 제공하지 않는 언어를 사용하거나 빠른 결과 확인을 해야 할 때 많이 사용한다. Rest Proxy는 confluent community 라이센스를 가지고 있다. 

![image](https://user-images.githubusercontent.com/61526722/190880562-b79ca41c-383f-4109-9b0b-6b04a49f0920.png)

## Schema Registry

MSA에서는 kafka 미들웨어의 도입을 통해 서비스가 서비스를 호출하는 방식이 아닌 kafka를 통해 메세지를 송수신 함으로써 비동기 처리를 가능하게 한다. 이때 producer와 consumer가 서로 누군지 모르는 상태에서 작동한다. 하지만 필드가 삭제/추가 되거나 데이터의 형이 변경될 수도 있기 때문에 메세지의 스키마는 항상 변동된다. 이때문에 producer와 consumer가 누군지 모르는 상황에서 이러한 스키마의 변동이 문제가 되는 경우도 있다.  
